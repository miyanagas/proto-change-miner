# docker/docker-compose.yml
services:
  runner:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: proto-change-miner
    user: "${UID:-1000}:${GID:-1000}"
    working_dir: /workspace
    volumes:
      - ..:/workspace
      - ../repos:/workspace/repos
      - ../results:/workspace/results
      - ../logs:/workspace/logs
    environment:
      - PYTHONPATH=/workspace/src
      - TZ=Asia/Tokyo
    entrypoint: ["bash", "-lc"]
    command: ["echo 'Use: docker compose run --rm runner <command>'"]
